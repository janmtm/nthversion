(()=>{"use strict";const e=window.wp.blocks,t=(window.wp.i18n,window.wp.blockEditor),o=window.wp.components,r=window.wp.data,n=window.wp.coreData,s=window.wp.editor,i=window.wp.element,a=window.ReactJSXRuntime,l=JSON.parse('{"UU":"nthversion/version"}');(0,e.registerBlockType)(l.UU,{edit:function({attributes:e,setAttributes:l}){const d=(0,r.useSelect)(e=>e("core/editor").getCurrentPostId(),[]),{editPost:c}=(0,r.useDispatch)(s.store),u=(0,r.useSelect)(e=>e(n.store).getEntityRecords("postType","post",{per_page:20,order:"desc",orderby:"date",status:"publish",exclude:d?[d]:void 0}),[d]),p=(0,i.useMemo)(()=>u&&Array.isArray(u)?u.filter(e=>{if(!e.content)return!1;const t=e.content.raw||e.content.rendered||"";return!!t&&/<!--\s*wp:nthversion\/version/.test(t)}):[],[u]),w=(0,i.useMemo)(()=>p&&p.length>0?p[0]:u?.[0],[p,u]),v=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if(!w||v.current)return;const e=(w.title?.rendered||"").match(/v\s*(\d+(?:\.\d+)?)/i);e&&(l({versionNumber:parseFloat(e[1])}),v.current=!0)},[w,l]);const{versionNumber:h}=e,[m,b]=(0,i.useState)("");return(0,i.useEffect)(()=>{h&&c({title:"Core Confidence v"+h})},[h,c]),(0,a.jsxs)("div",{...(0,t.useBlockProps)(),children:[(0,a.jsxs)(t.InspectorControls,{children:[(0,a.jsx)(o.PanelBody,{title:"Version type",children:(0,a.jsx)(o.RadioControl,{help:"Is this a major version or a minor update?",selected:m||"",options:[{label:"Major",value:"major"},{label:"Minor",value:"minor"}],onChange:e=>{var t;b(e),l({versionNumber:(t=e,"major"===t?Math.floor(h)+1:+(h+.1).toFixed(1))})}})}),(0,a.jsx)(o.PanelBody,{title:"Styling",children:(0,a.jsx)(o.TextControl,{__nextHasNoMarginBottom:!0,__next40pxDefaultSize:!0,label:"Additional CSS Class",value:e.className||"",onChange:e=>l({className:e})})})]}),(0,a.jsx)("h2",{class:"wp-block-post-title",children:"Core Confidence v"+h})]})},save:function({attributes:e}){return null}})})();